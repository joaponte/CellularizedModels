<CompuCell3D Revision="20200118" Version="4.1.1">

    <Metadata>
        <!-- Basic properties simulation -->
        <NumberOfProcessors>1</NumberOfProcessors>
        <DebugOutputFrequency>100</DebugOutputFrequency>
    </Metadata>

    <Potts>
        <!-- Basic properties of CPM (GGH) algorithm -->
        <Dimensions x="200" y="200" z="2"/>
        <Steps>4001</Steps>
        <Temperature>10.0</Temperature>
        <NeighborOrder>3</NeighborOrder>
        <Boundary_x>Periodic</Boundary_x>
        <Boundary_y>Periodic</Boundary_y>
    </Potts>

    <Plugin Name="CellType">
    <!-- Listing all cell types in the simulation -->
        <CellType TypeId="0" TypeName="Medium"/>
        <CellType Freeze="" TypeId="1" TypeName="Uninfected"/>
        <CellType Freeze="" TypeId="2" TypeName="Infected"/>
        <CellType Freeze="" TypeId="3" TypeName="VirusReleasing"/>
        <CellType Freeze="" TypeId="4" TypeName="Dead"/>
        <CellType TypeId="5" TypeName="CD8Local"/>
    </Plugin>

    <Plugin Name="Volume"/>

    <Plugin Name="CenterOfMass"/>

    <Plugin Name="NeighborTracker"/>

    <Plugin Name="Contact">
        <!-- Specification of adhesion energies -->
        <Energy Type1="Medium" Type2="Medium">10.0</Energy>
        <Energy Type1="Medium" Type2="Uninfected">25.0</Energy>
        <Energy Type1="Medium" Type2="Infected">25.0</Energy>
        <Energy Type1="Medium" Type2="VirusReleasing">25.0</Energy>
        <Energy Type1="Medium" Type2="Dead">25.0</Energy>
        <Energy Type1="Medium" Type2="CD8Local">20.0</Energy>
        <Energy Type1="Uninfected" Type2="Uninfected">5.0</Energy>
        <Energy Type1="Uninfected" Type2="Infected">5.0</Energy>
        <Energy Type1="Uninfected" Type2="VirusReleasing">5.0</Energy>
        <Energy Type1="Uninfected" Type2="Dead">5.0</Energy>
        <Energy Type1="Uninfected" Type2="CD8Local">20.0</Energy>
        <Energy Type1="Infected" Type2="Infected">5.0</Energy>
        <Energy Type1="Infected" Type2="VirusReleasing">5.0</Energy>
        <Energy Type1="Infected" Type2="Dead">5.0</Energy>
        <Energy Type1="Infected" Type2="CD8Local">20.0</Energy>
        <Energy Type1="VirusReleasing" Type2="VirusReleasing">5.0</Energy>
        <Energy Type1="VirusReleasing" Type2="Dead">5.0</Energy>
        <Energy Type1="VirusReleasing" Type2="CD8Local">20.0</Energy>
        <Energy Type1="Dead" Type2="Dead">5.0</Energy>
        <Energy Type1="Dead" Type2="CD8Local">20.0</Energy>
        <Energy Type1="CD8Local" Type2="CD8Local">25.0</Energy>
        <NeighborOrder>3</NeighborOrder>
    </Plugin>

   <Plugin Name="Chemotaxis">
        <ChemicalField Name="cytokine"/>
   </Plugin>

   <Plugin Name="Secretion"/>

   <Steppable Type="DiffusionSolverFE">
      <DiffusionField Name="Virus">
         <DiffusionData>
            <FieldName>Virus</FieldName>
            <GlobalDiffusionConstant id = "virus_dc">1.0</GlobalDiffusionConstant>
            <GlobalDecayConstant id = "virus_decay">0</GlobalDecayConstant>
         </DiffusionData>
         <SecretionData>
            <Secretion Type="VirusReleasing" id="virus_secr3">0.0</Secretion>
         </SecretionData>
         <BoundaryConditions>
            <Plane Axis="X">
               <Periodic/>
            </Plane>
            <Plane Axis="Y">
               <Periodic/>
            </Plane>
            <Plane Axis="Z">
               <ConstantDerivative PlanePosition="Min" Value="0.0"/>
               <ConstantDerivative PlanePosition="Max" Value="0.0"/>
            </Plane>
         </BoundaryConditions>
      </DiffusionField>
      <DiffusionField Name="cytokine">
         <DiffusionData>
            <FieldName>cytokine</FieldName>
            <GlobalDiffusionConstant id = "cytokine_dc">1.0</GlobalDiffusionConstant>
            <GlobalDecayConstant id = "cytokine_decay">0</GlobalDecayConstant>
         </DiffusionData>
         <SecretionData>
            <Secretion Type="Infected" id="cytokine_secr2">0.0</Secretion>
            <Secretion Type="VirusReleasing" id="cytokine_secr3">0.0</Secretion>
         </SecretionData>
         <BoundaryConditions>
            <Plane Axis="X">
               <Periodic/>
            </Plane>
            <Plane Axis="Y">
               <Periodic/>
            </Plane>
            <Plane Axis="Z">
               <ConstantDerivative PlanePosition="Min" Value="0.0"/>
               <ConstantDerivative PlanePosition="Max" Value="0.0"/>
            </Plane>
         </BoundaryConditions>
      </DiffusionField>
   </Steppable>
</CompuCell3D>
